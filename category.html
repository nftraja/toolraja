<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ToolRaja â€“ Category</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="drawer-overlay" id="overlay"></div>

<div class="drawer" id="drawer">
  <a href="index.html">ğŸ  Home</a>
  <a href="category.html?cat=ai-tools">ğŸ¤– AI Tools</a>
  <a href="category.html?cat=productivity">âš™ Productivity</a>
  <a href="category.html?cat=design">ğŸ¨ Design</a>
  <a href="category.html?cat=developer">ğŸ’» Developer</a>
  <a href="category.html?cat=marketing">ğŸ“ˆ Marketing</a>
  <a href="category.html?cat=writing">âœ Writing</a>
  <a href="category.html?cat=video">ğŸ¬ Video</a>
  <a href="category.html?cat=social">ğŸ“± Social</a>
  <a href="category.html?cat=finance">ğŸ’° Finance</a>
  <a href="category.html?cat=ecommerce">ğŸ›’ E-Commerce</a>
  <a href="category.html?cat=automation">ğŸ”„ Automation</a>
  <a href="category.html?cat=cloud">â˜ Cloud</a>
  <a href="category.html?cat=education">ğŸ“ Education</a>
  <a href="category.html?cat=career">ğŸ’¼ Career</a>
  <a href="category.html?cat=research">ğŸ“Š Research</a>
  <a href="category.html?cat=cybersecurity">ğŸ” Cybersecurity</a>
  <a href="category.html?cat=web3">â›“ Web3</a>
  <a href="category.html?cat=analytics">ğŸ“ˆ Analytics</a>
  <a href="category.html?cat=utilities">ğŸ§° Utilities</a>
  <a href="category.html?cat=no-code">ğŸ§  No-Code</a>
  <a href="category.html?cat=collaboration">ğŸ¤ Collaboration</a>
</div>

<header class="app-header">
  <button class="menu-btn" id="menuBtn">â˜°</button>
  <div class="logo" id="categoryTitle">Category</div>
</header>

<div class="main-content">

  <div class="glass-card">
    <input 
      type="text" 
      id="searchInput" 
      placeholder="Search tools in this category..." 
      class="search-input"
    >
  </div>

  <div id="toolsContainer" class="tools-grid"></div>

</div>

<script>

const params = new URLSearchParams(window.location.search);
let currentCategory = params.get("cat");

const toolsContainer = document.getElementById("toolsContainer");
const searchInput = document.getElementById("searchInput");
const categoryTitle = document.getElementById("categoryTitle");

let allTools = [];

/* ===== SLUG NORMALIZATION ===== */
function normalizeSlug(slug) {
  if (!slug) return "";

  slug = slug.toLowerCase();

  const map = {
    "ai": "ai-tools",
    "nocode": "no-code"
  };

  return map[slug] || slug;
}

currentCategory = normalizeSlug(currentCategory);

/* ===== LOAD TOOLS ===== */
async function loadTools() {
  try {
    const res = await fetch("tools.json");
    allTools = await res.json();
    renderTools();
  } catch (error) {
    toolsContainer.innerHTML =
      "<div class='glass-card'>Error loading tools.json</div>";
  }
}

/* ===== RENDER ===== */
function renderTools() {

  if (!currentCategory) {
    toolsContainer.innerHTML =
      "<div class='glass-card'>No category selected.</div>";
    return;
  }

  let filtered = allTools.filter(
    tool => tool.category === currentCategory
  );

  const query = searchInput.value.toLowerCase().trim();

  if (query) {
    filtered = filtered.filter(tool =>
      tool.name.toLowerCase().includes(query) ||
      tool.description.toLowerCase().includes(query)
    );
  }

  if (!filtered.length) {
    toolsContainer.innerHTML =
      "<div class='glass-card'>No tools found.</div>";
    return;
  }

  toolsContainer.innerHTML = filtered.map(tool => `
    <div class="tool-card">
      <h3>${tool.name}</h3>
      <p>${tool.description}</p>
      <a href="${tool.link}" target="_blank" class="visit-btn">
        Visit Tool
      </a>
    </div>
  `).join("");
}

/* ===== TITLE ===== */
if (currentCategory) {
  categoryTitle.innerText =
    currentCategory.replace(/-/g, " ").toUpperCase();
}

searchInput.addEventListener("input", renderTools);

loadTools();

</script>
<script src="app.js"></script>
</body>
</html>